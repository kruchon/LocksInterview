# LocksInterview

SomeController - рест контроллер с примерами аннотаций для блокировок, айдишники которых берутся из параметра с названием id.
Аннотации обрабатываются в LockAspect.

DbLockManager - создаем лок в БД через JDBC.

InMemoryLockManager - создаем лок в потокобезопасном Set, который аналогичен табличке в БД для DbLockManager.

SynchronizedInMemoryLockManager - способ с использованием синхронизаций и хранения локов в кэше, стратегия удаления = удаление неиспользуемых локов (isUsed = false). Этот способ предполагает переиспользование старых локов, если они еще не были удалены. Этот способ имеет проблему - EvictionAdvisor не гарантирует, то что EhCache не станет удалять неиспользуемые локи в 100% случаев. EhCache все равно удалит, если в кэше не останется свободного места.

Также есть юнит-тест LockManagerTest с двумя потоками, который проверяет работу локов.
